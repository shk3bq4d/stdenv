#!/usr/bin/env bash

if false; then
	DIR="$( cd -P "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
	source $DIR/mrurxvt-colors
	randomcolor
	urxvtcd -sl 65535 -bg "#${_MRCOLOR}" &
fi


source ~/bin/mrurxvt-colors
randomcolor
a=$_MRCOLOR
randomcolor
b=$_MRCOLOR
randomcolor
c=$_MRCOLOR
OUTDIR=~/.tmp/mrurxvt/
[[ ! -d $OUTDIR ]] && mkdir -p $OUTDIR
f=$OUTDIR/${a}-${b}-${c}.jpg
if [[ ! -f $f ]]; then
	convert -size 32x32 xc: -sparse-color barycentric "0,0 #${a}  -%w,%h #${b}  %w,%h #${c}" $f
fi
if false; then
	convert -size 4096x4096 xc: -sparse-color barycentric "0,0 #${a}  -%w,%h #${b}  %w,%h #${c}" \
	-fill none -stroke Blue  \
	-draw "stroke red  bezier 100,100 300,900   250,100 500,500 " \
    -draw "stroke red  bezier 500,500 750,900   700,100 900,400 " \
	-draw "image over 2000,2000 2000,2000 \"$HOME/tmp/bip.jpg\"" \
	$f
	#-fill DodgerBlue  -strokewidth 2 -draw "path 'M 50,30  m 0,25  a 1,1 0 0,0 0,-50  a 1,1 0 1,0 0,50'" \
fi
CD=$(mri3-focused-window-cwd.py)
[[ -n $CD ]] && CD="-cd $CD"
~/bin/notinpath/mrxmodmap.sh &
MR_TERM=urxvt urxvt $CD -sl 65535 --background-expr "scale keep { load \"$f\" }" "$@"
